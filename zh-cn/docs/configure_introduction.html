<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="configure_introduction" />
	<meta name="description" content="configure_introduction" />
	<!-- 网页标签标题 -->
	<title>configure_introduction</title>
	<link rel="shortcut icon" href="/img/apache.ico"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/zh-cn/index.html"><a href="//www.apache.org"><img class="logo apache" style="width:120px" src="/img/asf_logo.svg"/></a><div class="logo-split"></div><a href=""></a><img class="logo tube" style="width:72px" src="/img/Tube logo.svg"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">En</span><div class="header-menu"><img class="header-menu-toggle" src="/img/system/menu_gray.png"/><div><ul class="ant-menu blackClass ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/index.html" target="_self">首页</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/docs/quick_start.html" target="_self">文档</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/docs/download/download.html" target="_self">下载</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/docs/development/how-to-contribute.html" target="_self">开发</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="https://github.com/apache/incubator-tubemq" target="_self">GITHUB</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper">Apache</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></div></div><div class="header-background"></div></header><div class="bar"><div class="bar-body"><img src="/img/system/docs.png" class="front-img"/><span>文档</span><img src="/img/system/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>引导</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/quick_start.html" target="_self">快速开始</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/producer_example.html" target="_self">生产者示例</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/consumer_example.html" target="_self">消费者示例</a></li></ul></li><li class="menu-item menu-item-level-1"><span>架构及原理</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/architecture.html" target="_self">架构介绍</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/client_rpc.html" target="_self">客户端RPC</a></li></ul></li><li class="menu-item menu-item-level-1"><span>用户手册</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/deployment.html" target="_self">部署指引</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/configure_introduction.html" target="_self">配置参数介绍</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/console_introduction.html" target="_self">管控台操作指引</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/error_code.html" target="_self">错误码</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>API介绍<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/http_access_api.html" target="_self">HTTP API介绍</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/clients_java.html" target="_self">JAVA SDK API介绍</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span><div class="menu-item menu-item-level-1" style="margin-left:-20px"><a href="/zh-cn/docs/contact.html" target="_self" style="padding-left:20px">联系我们</a></div></span><ul></ul></li></ul></div><div class="doc-content markdown-body"><h1>TubeMQ服务端配置文件说明：</h1>
<p>TubeMQ服务端包括Master和Broker共2个模块，Master又包含供外部页面访问的Web前端模块（该部分存放在resources中），考虑到实际部署时2个模块常常部署在同1台机器中，TubeMQ将2个模块3个部分的内容打包在一起交付给运维使用；客户端则不包含服务端部分的lib包单独交付给业务使用。</p>
<p>Master与Broker采用ini配置文件格式，相关配置文件分别放置在tubemq-server-3.8.0/conf/目录的master.ini和broker.ini文件中：</p>
<p><img src="img/configure/conf_ini_pos.png" alt=""></p>
<p>他们的配置是按照配置单元集合来定义的，Master配置由必选的[master]、[zookeeper]、[bdbStore]和可选的[tlsSetting]一共4个配置单元组成，Broker配置由必选的[broker]、[zookeeper]和可选的[tlsSetting]一共3个配置单元组成；实际使用时，大家也可将两个配置文件内容合并放置为一个ini文件。</p>
<p>Master除了后端系统配置文件外，还在resources里存放了Web前端页面模块，resources的根目录velocity.properties文件为Master的Web前端页面配置文件。</p>
<p><img src="img/configure/conf_velocity_pos.png" alt=""></p>
<h2>配置项详情：</h2>
<h3>master.ini文件中关键配置内容说明：</h3>
<table>
<thead>
<tr>
<th>配置单元</th>
<th>配置项</th>
<th>是否必选</th>
<th>值类型</th>
<th>配置说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>[master]</td>
<td>Master系统运行主配置单元，必填单元，值固定为&quot;[master]&quot;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[master]</td>
<td>hostName</td>
<td>是</td>
<td>String</td>
<td>Master对外服务的主机地址，必填项，必须在网卡中已配置，处于启用状态，非回环且不能为127.0.0.1的IP</td>
</tr>
<tr>
<td>port</td>
<td>否</td>
<td>int</td>
<td>Master监听的端口，可选项，缺省值为8715</td>
<td></td>
</tr>
<tr>
<td>webPort</td>
<td>否</td>
<td>int</td>
<td>Master Web控制台的访问端口，缺省值为8080</td>
<td></td>
</tr>
<tr>
<td>webResourcePath</td>
<td>是</td>
<td>String</td>
<td>Master Web Resource部署绝对路径，必填项，该值设置不正确时Web页面将不能正常显示</td>
<td></td>
</tr>
<tr>
<td>confModAuthToken</td>
<td>否</td>
<td>String</td>
<td>通过Master的Web或API做变更操作（包括增、删、改配置，以及变更Master及管理的Broker状态）时操作者需要提供的授权Token，该值可选，缺省为&quot;ASDFGHJKL&quot;</td>
<td></td>
</tr>
<tr>
<td>firstBalanceDelayAfterStartMs</td>
<td>否</td>
<td>long</td>
<td>Master启动至首次开始Rebalance的时间间隔，可选项，缺省30000毫秒</td>
<td></td>
</tr>
<tr>
<td>consumerBalancePeriodMs</td>
<td>否</td>
<td>long</td>
<td>Master对消费组进行Rebalance的均衡周期，可选项，缺省60000毫秒，当集群规模较大时，请调大该值</td>
<td></td>
</tr>
<tr>
<td>consumerHeartbeatTimeoutMs</td>
<td>否</td>
<td>long</td>
<td>消费者心跳超时周期，可选项，缺省30000毫秒，当集群规模较大时，请调大该值</td>
<td></td>
</tr>
<tr>
<td>producerHeartbeatTimeoutMs</td>
<td>否</td>
<td>long</td>
<td>生产者心跳超时周期，可选项，缺省30000毫秒，当集群规模较大时，请调大该值</td>
<td></td>
</tr>
<tr>
<td>brokerHeartbeatTimeoutMs</td>
<td>否</td>
<td>long</td>
<td>Broker心跳超时周期，可选项，缺省30000毫秒，当集群规模较大时，请调大该值</td>
<td></td>
</tr>
<tr>
<td>socketRecvBuffer</td>
<td>否</td>
<td>long</td>
<td>Socket接收Buffer缓冲区SO_RCVBUF大小,单位字节, 负数为不做设置以缺省值为准</td>
<td></td>
</tr>
<tr>
<td>socketSendBuffer</td>
<td>否</td>
<td>long</td>
<td>Socket发送Buffer缓冲区SO_SNDBUF大小,单位字节, 负数为不做设置以缺省值为准</td>
<td></td>
</tr>
<tr>
<td>maxAutoForbiddenCnt</td>
<td>否</td>
<td>int</td>
<td>Broker出现IO故障时最大允许Master自动下线Broker个数，可选项，缺省为5，建议该值不超过集群内Broker总数的10%</td>
<td></td>
</tr>
<tr>
<td>startOffsetResetCheck</td>
<td>否</td>
<td>boolean</td>
<td>是否启用客户端Offset重置功能的检查功能，可选项，缺省为false</td>
<td></td>
</tr>
<tr>
<td>needBrokerVisitAuth</td>
<td>否</td>
<td>boolean</td>
<td>是否启用Broker访问鉴权，缺省为false，如果为true，则Broker上报的消息里必须携带正确的用户名及签名信息</td>
<td></td>
</tr>
<tr>
<td>visitName</td>
<td>否</td>
<td>String</td>
<td>Broker访问鉴权的用户名，缺省为空字符串，在needBrokerVisitAuth为true时该值必须存在，该值必须与broker.ini里的visitName字段值同</td>
<td></td>
</tr>
<tr>
<td>visitPassword</td>
<td>否</td>
<td>String</td>
<td>Broker访问鉴权的密码，缺省为空字符串，在needBrokerVisitAuth为true时该值必须存在，该值必须与broker.ini里的visitPassword字段值同</td>
<td></td>
</tr>
<tr>
<td>startVisitTokenCheck</td>
<td>否</td>
<td>boolean</td>
<td>是否启用客户端visitToken检查，缺省为false</td>
<td></td>
</tr>
<tr>
<td>startProduceAuthenticate</td>
<td>否</td>
<td>boolean</td>
<td>是否启用生产端用户认证，缺省为false</td>
<td></td>
</tr>
<tr>
<td>startProduceAuthorize</td>
<td>否</td>
<td>boolean</td>
<td>是否启用生产端生产授权认证，缺省为false</td>
<td></td>
</tr>
<tr>
<td>startConsumeAuthenticate</td>
<td>否</td>
<td>boolean</td>
<td>是否启用消费端用户认证，缺省为false</td>
<td></td>
</tr>
<tr>
<td>startConsumeAuthorize</td>
<td>否</td>
<td>boolean</td>
<td>是否启用消费端消费授权认证，缺省为false</td>
<td></td>
</tr>
<tr>
<td>maxGroupBrokerConsumeRate</td>
<td>否</td>
<td>int</td>
<td>集群Broker数与消费组里成员数的最大比值，可选项，缺省为50，50台Broker集群里允许1个消费组最少启动1个客户端消费</td>
<td></td>
</tr>
<tr>
<td>metaDataPath</td>
<td>否</td>
<td>String</td>
<td>Metadata存储路径，可以是绝对路径、或者相对TubeMQ安装目录（&quot;$BASE_DIR&quot;）的相对路径。缺省为&quot;var/meta_data&quot;</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[zookeeper]</td>
<td>Master对应的TubeMQ集群存储Offset的ZooKeeper集群相关信息，必填单元，值固定为&quot;[zookeeper]&quot;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[zookeeper]</td>
<td>zkServerAddr</td>
<td>否</td>
<td>String</td>
<td>zk服务器地址，可选配置，缺省为&quot;localhost:2181&quot;</td>
</tr>
<tr>
<td>zkNodeRoot</td>
<td>否</td>
<td>String</td>
<td>zk上的节点根目录路径，可选配置，缺省为&quot;/tubemq&quot;</td>
<td></td>
</tr>
<tr>
<td>zkSessionTimeoutMs</td>
<td>否</td>
<td>long</td>
<td>zk心跳超时，单位毫秒，默认30秒</td>
<td></td>
</tr>
<tr>
<td>zkConnectionTimeoutMs</td>
<td>否</td>
<td>long</td>
<td>zk连接超时时间，单位毫秒，默认30秒</td>
<td></td>
</tr>
<tr>
<td>zkSyncTimeMs</td>
<td>否</td>
<td>long</td>
<td>zk数据同步时间，单位毫秒，默认5秒</td>
<td></td>
</tr>
<tr>
<td>zkCommitPeriodMs</td>
<td>否</td>
<td>long</td>
<td>Master缓存数据刷新到zk上的时间间隔，单位毫秒，默认5秒</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[replication]</td>
<td>集群数据复制的相关配置，用于实现元数据多节点热备，必填单元，值固定为&quot;[replication]&quot;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[replication]</td>
<td>repGroupName</td>
<td>否</td>
<td>String</td>
<td>集群名，所属主备Master节点值必须相同，可选字段，缺省为&quot;tubemqMasterGroup&quot;</td>
</tr>
<tr>
<td>repNodeName</td>
<td>是</td>
<td>String</td>
<td>所属Master在集群中的节点名，该值各个节点必须不重复，必填字段</td>
<td></td>
</tr>
<tr>
<td>repNodePort</td>
<td>否</td>
<td>int</td>
<td>节点复制通讯端口，可选字段，缺省为9001</td>
<td></td>
</tr>
<tr>
<td>repHelperHost</td>
<td>否</td>
<td>String</td>
<td>集群启动时的主节点，可选字段，缺省为&quot;127.0.0.1:9001&quot;</td>
<td></td>
</tr>
<tr>
<td>metaLocalSyncPolicy</td>
<td>否</td>
<td>int</td>
<td>数据节点本地保存方式，该字段取值范围[1，2，3]，缺省为1：其中1为数据保存到磁盘，2为数据只保存到内存，3为只将数据写文件系统buffer，但不刷盘</td>
<td></td>
</tr>
<tr>
<td>metaReplicaSyncPolicy</td>
<td>否</td>
<td>int</td>
<td>数据节点同步保存方式，该字段取值范围[1，2，3]，缺省为1：其中1为数据保存到磁盘，2为数据只保存到内存，3为只将数据写文件系统buffer，但不刷盘</td>
<td></td>
</tr>
<tr>
<td>repReplicaAckPolicy</td>
<td>否</td>
<td>int</td>
<td>节点数据同步时的应答策略，该字段取值范围为[1，2，3]，缺省为1：其中1为超过1/2多数为有效，2为所有节点应答才有效；3为不需要节点应答</td>
<td></td>
</tr>
<tr>
<td>repStatusCheckTimeoutMs</td>
<td>否</td>
<td>long</td>
<td>节点状态检查间隔，可选字段，单位毫秒，缺省为10秒</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[bdbStore]</td>
<td>已弃用，请在&quot;[replication]&quot;单元进行相关配置。Master所属BDB集群的相关配置，Master采用BDB进行元数据存储以及多节点热备，必填单元，值固定为&quot;[bdbStore]&quot;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[bdbStore]</td>
<td>bdbRepGroupName</td>
<td>是</td>
<td>String</td>
<td>BDB集群名，所属主备Master节点值必须相同，必填字段</td>
</tr>
<tr>
<td>bdbNodeName</td>
<td>是</td>
<td>String</td>
<td>所属Master在BDB集群中的节点名，该值各个BDB节点必须不重复，必填字段</td>
<td></td>
</tr>
<tr>
<td>bdbNodePort</td>
<td>否</td>
<td>int</td>
<td>BDB节点通讯端口，可选字段，缺省为9001</td>
<td></td>
</tr>
<tr>
<td>bdbEnvHome</td>
<td>是</td>
<td>String</td>
<td>BDB数据存储路径，必填字段</td>
<td></td>
</tr>
<tr>
<td>bdbHelperHost</td>
<td>是</td>
<td>String</td>
<td>BDB集群启动时的主节点，必填字段</td>
<td></td>
</tr>
<tr>
<td>bdbLocalSync</td>
<td>否</td>
<td>int</td>
<td>BDB数据节点本地保存方式，该字段取值范围[1，2，3]，缺省为1：其中1为数据保存到磁盘，2为数据只保存到内存，3为只将数据写文件系统buffer，但不刷盘</td>
<td></td>
</tr>
<tr>
<td>bdbReplicaSync</td>
<td>否</td>
<td>int</td>
<td>BDB数据节点同步保存方式，该字段取值范围[1，2，3]，缺省为1：其中1为数据保存到磁盘，2为数据只保存到内存，3为只将数据写文件系统buffer，但不刷盘</td>
<td></td>
</tr>
<tr>
<td>bdbReplicaAck</td>
<td>否</td>
<td>int</td>
<td>BDB节点数据同步时的应答策略，该字段取值范围为[1，2，3]，缺省为1：其中1为超过1/2多数为有效，2为所有节点应答才有效；3为不需要节点应答</td>
<td></td>
</tr>
<tr>
<td>bdbStatusCheckTimeoutMs</td>
<td>否</td>
<td>long</td>
<td>BDB状态检查间隔，可选字段，单位毫秒，缺省为10秒</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[tlsSetting]</td>
<td>Master采用TLS进行传输层数据加密，启用TLS时通过该配置单元提供相关的设置，可选单元，值固定为&quot;[tlsSetting]&quot;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[tlsSetting]</td>
<td>tlsEnable</td>
<td>否</td>
<td>boolean</td>
<td>是否启用TLS功能，可选配置，缺省为false</td>
</tr>
<tr>
<td>tlsPort</td>
<td>否</td>
<td>int</td>
<td>Master的TLS端口号，可选配置，缺省为8716</td>
<td></td>
</tr>
<tr>
<td>tlsKeyStorePath</td>
<td>否</td>
<td>String</td>
<td>TLS的keyStore文件的绝对存储路径+keyStore文件名，在启动TLS功能时，该字段必填且不能为空</td>
<td></td>
</tr>
<tr>
<td>tlsKeyStorePassword</td>
<td>否</td>
<td>String</td>
<td>TLS的keyStorePassword文件的绝对存储路径+keyStorePassword文件名，在启动TLS功能时，该字段必填且不能为空</td>
<td></td>
</tr>
<tr>
<td>tlsTwoWayAuthEnable</td>
<td>否</td>
<td>boolean</td>
<td>是否启用TLS双向认证功能，可选配置，缺省为false</td>
<td></td>
</tr>
<tr>
<td>tlsTrustStorePath</td>
<td>否</td>
<td>String</td>
<td>TLS的TrustStore文件的绝对存储路径+TrustStore文件名，在启动TLS功能且启用双向认证时，该字段必填且不能为空</td>
<td></td>
</tr>
<tr>
<td>tlsTrustStorePassword</td>
<td>否</td>
<td>String</td>
<td>TLS的TrustStorePassword文件的绝对存储路径+TrustStorePassword文件名，在启动TLS功能且启用双向认证时，该字段必填且不能为空</td>
<td></td>
</tr>
</tbody>
</table>
<h3>Master的前台配置文件velocity.properties中关键配置内容说明：</h3>
<table>
<thead>
<tr>
<th>配置单元</th>
<th>配置项</th>
<th>是否必选</th>
<th>值类型</th>
<th>配置说明</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>file.resource.loader.path</td>
<td>是</td>
<td>String</td>
<td>Master的Web的模板绝对路径，该部分为实际部署Master时的工程绝对路径+/resources/templates，该配置要与实际部署相吻合，配置失败会导致Master前端页面访问失败。</td>
<td></td>
</tr>
</tbody>
</table>
<h3>broker.ini文件中关键配置内容说明：</h3>
<table>
<thead>
<tr>
<th>配置单元</th>
<th>配置项</th>
<th>是否必选</th>
<th>值类型</th>
<th>配置说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>[broker]</td>
<td>Broker系统运行主配置单元，必填单元，值固定为&quot;[broker]&quot;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[broker]</td>
<td>brokerId</td>
<td>是</td>
<td>int</td>
<td>服务器唯一标志，必填字段，可设为0；设为0时系统将默认取本机IP转化为int值再取abs绝对值，避免brokerId为负数，如果使用环境的IP比较复杂存在生成的brokerId值冲突时，则需要指定brokerId值进行设置。</td>
</tr>
<tr>
<td>hostName</td>
<td>是</td>
<td>String</td>
<td>Broker对外服务的主机地址，必填项，必须在网卡中已配置，处于启用状态，非回环且不能为127.0.0.1的IP</td>
<td></td>
</tr>
<tr>
<td>port</td>
<td>否</td>
<td>int</td>
<td>Broker监听的端口，可选项，缺省值为8123</td>
<td></td>
</tr>
<tr>
<td>webPort</td>
<td>否</td>
<td>int</td>
<td>Broker的http管理访问端口,可选项,缺省为8081</td>
<td></td>
</tr>
<tr>
<td>masterAddressList</td>
<td>是</td>
<td>String</td>
<td>Broker所属集群的Master地址列表，必填字段，格式必须是ip1:port1,ip2:port2,ip3:port3</td>
<td></td>
</tr>
<tr>
<td>primaryPath</td>
<td>是</td>
<td>String</td>
<td>Broker存储消息的绝对路径，必选字段</td>
<td></td>
</tr>
<tr>
<td>maxSegmentSize</td>
<td>否</td>
<td>int</td>
<td>Broker存储消息Data内容的文件大小，可选字段，缺省512M，最大1G</td>
<td></td>
</tr>
<tr>
<td>maxIndexSegmentSize</td>
<td>否</td>
<td>int</td>
<td>Broker存储消息Index内容的文件大小，可选字段，缺省18M，约70W条消息每文件</td>
<td></td>
</tr>
<tr>
<td>transferSize</td>
<td>否</td>
<td>int</td>
<td>Broker允许每次传输给客户端的最大消息内容大小，可选字段，缺省为512K</td>
<td></td>
</tr>
<tr>
<td>consumerRegTimeoutMs</td>
<td>否</td>
<td>long</td>
<td>consumer心跳超时时间，可选项，单位毫秒，默认30秒</td>
<td></td>
</tr>
<tr>
<td>socketRecvBuffer</td>
<td>否</td>
<td>long</td>
<td>Socket接收Buffer缓冲区SO_RCVBUF大小,单位字节,负数为不做设置以缺省值为准</td>
<td></td>
</tr>
<tr>
<td>socketSendBuffer</td>
<td>否</td>
<td>long</td>
<td>Socket发送Buffer缓冲区SO_SNDBUF大小,单位字节,负数为不做设置以缺省值为准</td>
<td></td>
</tr>
<tr>
<td>tcpWriteServiceThread</td>
<td>否</td>
<td>int</td>
<td>Broker支持TCP生产服务的socket worker线程数，可选字段，缺省为所在机器的2倍CPU个数</td>
<td></td>
</tr>
<tr>
<td>tcpReadServiceThread</td>
<td>否</td>
<td>int</td>
<td>Broker支持TCP消费服务的socket worker线程数，可选字段，缺省为所在机器的2倍CPU个数</td>
<td></td>
</tr>
<tr>
<td>logClearupDurationMs</td>
<td>否</td>
<td>long</td>
<td>消息文件的老化清理周期, 单位为毫秒, 缺省为3分钟进行一次日志清理操作,最低1分钟</td>
<td></td>
</tr>
<tr>
<td>logFlushDiskDurMs</td>
<td>否</td>
<td>long</td>
<td>批量检查消息持久化到文件的检查周期,单位为毫秒, 缺省为20秒进行一次全量的检查及刷盘</td>
<td></td>
</tr>
<tr>
<td>visitTokenCheckInValidTimeMs</td>
<td>否</td>
<td>long</td>
<td>visitToken检查时允许Broker注册后延迟检查的时长，单位ms,缺省120000，取值范围[60000，300000]</td>
<td></td>
</tr>
<tr>
<td>visitMasterAuth</td>
<td>否</td>
<td>boolean</td>
<td>是否启用上报Master鉴权，缺省为false，如果为true，则会在上报Master的信令里加入用户名及签名信息</td>
<td></td>
</tr>
<tr>
<td>visitName</td>
<td>否</td>
<td>String</td>
<td>访问Master的用户名，缺省为空字符串，在visitMasterAuth为true时该值必须存在，该值必须与master.ini里的visitName字段值同</td>
<td></td>
</tr>
<tr>
<td>visitPassword</td>
<td>否</td>
<td>String</td>
<td>访问Master的密码，缺省为空字符串，在visitMasterAuth为true时该值必须存在，该值必须与master.ini里的visitPassword字段值同</td>
<td></td>
</tr>
<tr>
<td>logFlushMemDurMs</td>
<td>否</td>
<td>long</td>
<td>批量检查消息内存持久化到文件的检查周期,单位为毫秒, 缺省为10秒进行一次全量的检查及刷盘</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[zookeeper]</td>
<td>Broker对应的Tube MQ集群存储Offset的ZooKeeper集群相关信息，必填单元，值固定为&quot;[zookeeper]&quot;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[zookeeper]</td>
<td>zkServerAddr</td>
<td>否</td>
<td>String</td>
<td>zk服务器地址，可选配置，缺省为&quot;localhost:2181&quot;</td>
</tr>
<tr>
<td>zkNodeRoot</td>
<td>否</td>
<td>String</td>
<td>zk上的节点根目录路径，可选配置，缺省为&quot;/tubemq&quot;</td>
<td></td>
</tr>
<tr>
<td>zkSessionTimeoutMs</td>
<td>否</td>
<td>long</td>
<td>zk心跳超时，单位毫秒，默认30秒</td>
<td></td>
</tr>
<tr>
<td>zkConnectionTimeoutMs</td>
<td>否</td>
<td>long</td>
<td>zk连接超时时间，单位毫秒，默认30秒</td>
<td></td>
</tr>
<tr>
<td>zkSyncTimeMs</td>
<td>否</td>
<td>long</td>
<td>zk数据同步时间，单位毫秒，默认5秒</td>
<td></td>
</tr>
<tr>
<td>zkCommitPeriodMs</td>
<td>否</td>
<td>long</td>
<td>Broker缓存数据刷新到zk上的时间间隔，单位毫秒，默认5秒</td>
<td></td>
</tr>
<tr>
<td>zkCommitFailRetries</td>
<td>否</td>
<td>int</td>
<td>Broker刷新缓存数据到Zk失败后的最大重刷次数</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[tlsSetting]</td>
<td>Master采用TLS进行传输层数据加密，启用TLS时通过该配置单元提供相关的设置，可选单元，值固定为&quot;[tlsSetting]&quot;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[tlsSetting]</td>
<td>tlsEnable</td>
<td>否</td>
<td>boolean</td>
<td>是否启用TLS功能，可选配置，缺省为false</td>
</tr>
<tr>
<td>tlsPort</td>
<td>否</td>
<td>int</td>
<td>Broker的TLS端口号，可选配置，缺省为8124</td>
<td></td>
</tr>
<tr>
<td>tlsKeyStorePath</td>
<td>否</td>
<td>String</td>
<td>TLS的keyStore文件的绝对存储路径+keyStore文件名，在启动TLS功能时，该字段必填且不能为空</td>
<td></td>
</tr>
<tr>
<td>tlsKeyStorePassword</td>
<td>否</td>
<td>String</td>
<td>TLS的keyStorePassword文件的绝对存储路径+keyStorePassword文件名，在启动TLS功能时，该字段必填且不能为空</td>
<td></td>
</tr>
<tr>
<td>tlsTwoWayAuthEnable</td>
<td>否</td>
<td>boolean</td>
<td>是否启用TLS双向认证功能，可选配置，缺省为false</td>
<td></td>
</tr>
<tr>
<td>tlsTrustStorePath</td>
<td>否</td>
<td>String</td>
<td>TLS的TrustStore文件的绝对存储路径+TrustStore文件名，在启动TLS功能且启用双向认证时，该字段必填且不能为空</td>
<td></td>
</tr>
<tr>
<td>tlsTrustStorePassword</td>
<td>否</td>
<td>String</td>
<td>TLS的TrustStorePassword文件的绝对存储路径+TrustStorePassword文件名，在启动TLS功能且启用双向认证时，该字段必填且不能为空</td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<p><a href="#top">Back to top</a></p>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/img/incubator-logo.svg"/><div class="cols-container"><div class="col col-24"><p>Apache TubeMQ (incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p></div></div><div class="copyright"><span>Copyright © 2019-2020 The Apache Software Foundation. Apache TubeMQ, TubeMQ, and its feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script src="https://buttons.github.io/buttons.js"></script>
	<script>
		window.rootPath = '';
  </script>
	<script src="/build/documentation.js"></script>
</body>
</html>
